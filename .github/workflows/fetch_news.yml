name: Fetch Daily News for Typing Game

on:
  workflow_dispatch: # 手動実行を許可
  schedule:
    - cron: '0 0 * * *' # 毎日午前0時 (UTC) に実行

jobs:
  fetch:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: actions/checkout@v4
      # curlとjqをインストールするステップ
      - name: Install dependencies (curl and jq)
        run: sudo apt-get update && sudo apt-get install -y curl jq
      - name: Fetch news and update file
        run: |
          API_KEY="b35f9afdc84845b782d4120453db88ea" # ★あなたのキーに置き換える
          # APIの正しいエンドポイントとキーを使ってデータを取得する
          curl -s "https://newsapi.org" | jq -r '.articles[].content' > news_data.txt
      - name: Commit files
        run: |
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add news_data.txt
          git commit -m "Update daily news text"
          git push
