name: Update Daily News

on:
  workflow_dispatch: # 手動実行ボタン
  workflow_dispatch:
  schedule:
    - cron: '0 21 * * *' # 日本時間の毎朝6時に実行
    - cron: '0 21 * * *' # 日本時間 朝6時

jobs:
  build:
@@ -15,11 +15,14 @@ jobs:

      - name: Fetch RSS and Extract Titles
        run: |
          # 【テスト中】ニュースの代わりに固定文字列を書き込みます
          echo "これはテスト用のニュースタイトルです。" > news_data.txt
          echo "テストが成功すればこれが表示されます。" >> news_data.txt
          # Yahoo!ニュースの主要ニュースRSSからタイトルを取得
          curl -s https://news.yahoo.co.jp \
          | grep -oP '(?<=<title>).*?(?=</title>)' \
          | tail -n +2 \
          | sed 's/&quot;/"/g; s/&amp;/\&/g; s/&lt;/</g; s/&gt;/>/g; s/&apos;/\x27/g; s/&yen;/¥/g' \
          > news_data.txt
          
          # ファイルの中身をログに出力して確認
          # ログ出力して確認
          cat news_data.txt

      - name: Commit and Push
