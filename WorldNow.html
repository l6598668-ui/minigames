<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; }
        #player { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        #ui-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 100; display: flex; justify-content: center; align-items: center; }
        #start-btn { padding: 20px 40px; background: #ff0000; color: #fff; font-size: 20px; border: none; border-radius: 50px; cursor: pointer; }
    </style>
</head>
<body>

    <div id="player"></div>

    <!-- 最初にこれだけはクリックしてもらう必要があります（ブラウザ制限のため） -->
    <div id="ui-layer">
        <button id="start-btn" onclick="startTour()">世界旅行を始める（音あり）</button>
    </div>

<script>
    // 1. YouTube APIを安全に読み込む
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // 旅するライブカメラのIDリスト
    const videoList = [
        'OuCbntsMsWY', // 最初
        'eJ7ZkQ5TC08', // 次のライブカメラ（例）
        '5_XSYlAfJZM'  // その次のライブカメラ（例）
    ];
    let currentIndex = 0;
    let player;

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            height: '100%',
            width: '100%',
            videoId: videoList[currentIndex],
            playerVars: {
                'autoplay': 0,
                'controls': 0,
                'rel': 0,
                'mute': 1, // 最初はミュート必須
                'playsinline': 1,
                'enablejsapi': 1,
                'origin': window.location.origin // これが重要！CORB対策
            }
        });
    }

    function startTour() {
        // ボタンレイヤーを消す
        document.getElementById('ui-layer').style.display = 'none';

        // 旅の開始
        playCurrentVideo();

        // 60秒ごとに切り替え
        setInterval(nextDestination, 60000);
    }

    function playCurrentVideo() {
        if (player && player.loadVideoById) {
            player.loadVideoById(videoList[currentIndex]);
            player.unMute(); // クリック後なので音が出せる
            player.playVideo();
        }
    }

    function nextDestination() {
        currentIndex = (currentIndex + 1) % videoList.length;
        console.log("次の目的地へ: " + videoList[currentIndex]);
        playCurrentVideo();
    }
</script>
</body>
</html>
