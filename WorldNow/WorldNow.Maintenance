<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>WorldNow - Maintenance</title>
    <style>
        body { margin: 0; background: #1a1a1a; color: #fff; font-family: sans-serif; display: flex; height: 100vh; }
        /* 左側：リストエリア */
        #list-sidebar { width: 350px; background: #222; border-right: 1px solid #444; overflow-y: auto; padding: 10px; }
        .cam-item { 
            width: 100%; text-align: left; padding: 12px; margin-bottom: 8px; 
            background: #333; border: 1px solid #444; color: #eee; cursor: pointer; border-radius: 4px;
        }
        .cam-item:hover { background: #444; border-color: #00ffcc; }
        .cam-item.active { background: #00ffcc; color: #000; font-weight: bold; }
        .cam-name { display: block; font-size: 14px; }
        .cam-id { font-size: 11px; opacity: 0.7; font-family: monospace; }

        /* 右側：プレビューエリア */
        #preview-main { flex: 1; display: flex; flex-direction: column; padding: 20px; gap: 15px; }
        #player-wrapper { width: 100%; aspect-ratio: 16/9; background: #000; }
        .info-panel { background: #333; padding: 15px; border-radius: 8px; }
    </style>
</head>
<body>

<div id="list-sidebar">
    <h3>Camera List</h3>
    <div id="btn-container">Loading...</div>
</div>

<div id="preview-main">
    <div id="player-wrapper"><div id="player"></div></div>
    <div class="info-panel">
        <h2 id="display-name">カメラを選択してください</h2>
        <p id="display-detail">ID: --- / TimeZone: ---</p>
    </div>
</div>

<script>
    let videoList = [];
    let player;

    // YouTube APIの初期化
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
            height: '100%', width: '100%',
            playerVars: { 'autoplay': 1, 'controls': 1, 'rel': 0 },
            events: { 'onReady': loadData }
        });
    }

    // locations.txt（JSON）の読み込み
    async function loadData() {
        try {
            const response = await fetch('locations.txt');
            const textData = await response.text();
            videoList = JSON.parse(textData);
            renderButtons();
        } catch (e) {
            document.getElementById('btn-container').innerText = "Load Error: " + e;
        }
    }

    // ボタン一覧の生成
    function renderButtons() {
        const container = document.getElementById('btn-container');
        container.innerHTML = "";

        videoList.forEach((item) => {
            const btn = document.createElement('button');
            btn.className = 'cam-item';
            btn.innerHTML = `<span class="cam-name">${item.name}</span><span class="cam-id">${item.id}</span>`;
            
            btn.onclick = () => {
                // スタイル更新
                document.querySelectorAll('.cam-item').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                // 即時再生
                player.loadVideoById(item.id);
                
                // 情報表示
                document.getElementById('display-name').innerText = item.name;
                document.getElementById('display-detail').innerText = `ID: ${item.id} / TimeZone: ${item.tz} / City: ${item.cityName}`;
            };
            container.appendChild(btn);
        });
    }
</script>
<script src="https://www.youtube.com/iframe_api"></script>
</body>
</html>
